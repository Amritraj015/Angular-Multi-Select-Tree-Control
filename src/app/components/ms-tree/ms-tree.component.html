<div class="inner-tree-container">
  <div class="search-container">
    <mat-form-field>
      <input
        matInput
        placeholder="Input"
        type="text"
        autofocus="autofocus"
        aria-label="Number"
        placeholder="Search"
        matInput
        [formControl]="searchControl"
        [matAutocomplete]="auto"
        (input)="searchTerm = $event.target.value"
      />
      <mat-icon matSuffix>search</mat-icon>
      <mat-hint>Search User Group(s)</mat-hint>

      <mat-autocomplete #auto="matAutocomplete">
        <mat-option
          *ngFor="let option of (filteredOptions | async)"
          [value]="option"
        >
          {{ option }}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </div>

  <mat-tab-group mat-align-tabs="center">
    <!--  This is the "Show All" Tab  -->
    <mat-tab label="Show All">
      <div class="tree-display">
        <mat-tree
          [dataSource]="dataSource"
          [treeControl]="treeControl"
          class="ms-tree"
        >
          <!-- This is the tree node template for leaf nodes -->
          <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
            <li class="mat-tree-node">
              <!-- use of a disabled button to provide padding for tree leaf -->
              <button mat-icon-button disabled></button>

              <mat-checkbox
                [checked]="node.nodeSelected"
                (change)="isNodeSelected(node)"
                color="warn"
                ><div
                  [innerHTML]="node.nodeName | searchFilter: searchTerm"
                ></div
              ></mat-checkbox>
            </li>
          </mat-tree-node>

          <!-- This is the tree node template for expandable nodes -->
          <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
            <li>
              <div class="mat-tree-node">
                <button
                  mat-icon-button
                  matTreeNodeToggle
                  [attr.aria-label]="'toggle ' + node.nodeName"
                >
                  <mat-icon class="mat-icon-rtl-mirror">
                    {{
                      treeControl.isExpanded(node)
                        ? "expand_more"
                        : "chevron_right"
                    }}
                  </mat-icon>
                </button>

                <mat-checkbox
                  [checked]="node.nodeSelected"
                  (change)="isNodeSelected(node)"
                  color="warn"
                  ><div
                    [innerHTML]="node.nodeName | searchFilter: searchTerm"
                  ></div
                ></mat-checkbox>
              </div>

              <ul [class.ms-tree-invisible]="!treeControl.isExpanded(node)">
                <ng-container matTreeNodeOutlet></ng-container>
              </ul>
            </li>
          </mat-nested-tree-node>
        </mat-tree>
      </div>
    </mat-tab>

    <!--  This is the "Show Selected" Tab  -->
    <mat-tab label="Show Selected">
      <div class="tree-display">This is a Test Div</div>
    </mat-tab>
  </mat-tab-group>
</div>
